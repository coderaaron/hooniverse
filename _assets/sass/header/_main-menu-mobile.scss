/**
 * Mobile menu styles.
 */
@media screen and (max-width: $break-menu - $rem-pixel) {
	.site-header {
		border-bottom: 1px solid $gray-light;
		height: 100%;
		position: relative;
	}

	.washu-main-menu-wrapper ul {
		margin-left: 0px;

		a {
			text-decoration: none;
		}
	}

	.nav-search,
	.washu-main-menu-content .desktop-search-close {
		display: none;
	}

	/* remove "X" from search input field */
	input[type="search"]::-webkit-search-decoration,
	input[type="search"]::-webkit-search-cancel-button,
	input[type="search"]::-webkit-search-results-button,
	input[type="search"]::-webkit-search-results-decoration { display: none; }
	input[type=text]::-ms-clear {  display: none; width : 0; height: 0; }
	input[type=text]::-ms-reveal {  display: none; width : 0; height: 0; }

	.washu-main-menu-wrapper {
		@include font-smoothing;
	}

	.washu-main-menu-trigger {
		display: inline-block;
		background: none;
		border: none;
		padding: 1em 4% 1em 1em;
		position: absolute;
	    top: 50%;
    	right: 0;
    	transform: translateY(-50%);
    	pointer-events: all;
		-webkit-appearance: none;

		svg {
			width: 51px;
			display: block;
		}

		&:hover {
			text-decoration: none;
		}
	}

	.washu-main-menu-content a,
	.washu-main-menu-content ul a,
	.washu-main-menu-content button {
		height: 50px;
		padding: 0 20px;
		line-height: 50px;
	}

	.washu-main-menu {
		box-shadow: 0 50px 100px rgba(61, 61, 61, 0.2), 0 5px 20px 5px rgba(0, 0, 0, 0.35);
		position: absolute;
		top: 0.55em;
		margin-left: auto;
		margin-right: auto;
		left: 0;
		right: 0;
		width: 95%;
		height: auto;
		background: $gray-dark;
		color: #fff;
		z-index: 1000;
		visibility: hidden;
		opacity: 0;
		transition: visibility 0s ease 0.15s, opacity 0.15s ease;

		.active & {
			visibility: visible;
			opacity: 1;
			transition-delay: 0s;
		}

		.main-menu-button {
			/* 'X' close icon - mobile version only */
			position: absolute;
			top: 0;
			z-index: 2;
			height: 51px;
			width: 51px;
			background: none;
			border: 0;
			border-radius: 0;

			/* image replacement */
			overflow: hidden;
			text-indent: 100%;
			white-space: nowrap;
			color: transparent;
		}

		.main-menu-back {
			@extend .main-menu-button;
			display: none; // Only show on .move-out state.
			left: 0;

			&.visible {
				display: block;
			}

			&:before,
			&:after {
				/* arrow icon in CSS - for element with nested unordered lists */
				content: '';
				position: absolute;
				top: 50%;
				left: 20%;
				height: 2px;
				width: 10px;
				background: #fff;
				transform-origin: 9px 50%;
				backface-visibility: hidden;
			}

			&:before {
				transform: rotate( 135deg );
			}

			&:after {
				transform: rotate(-135deg);
			}
		}

		.main-menu-close {
			@extend .main-menu-button;
			right: 0;

			&::after,
			&::before {
				/* this is the 'X' icon */
				content: '';
				position: absolute;
				@include center;
				height: 20px;
				width: 2px;
				background-color: #fff;
				backface-visibility: hidden;
			}

			&::after {
				transform: translateX(-50%) translateY(-50%) rotate(45deg);
			}

			&::before {
				transform: translateX(-50%) translateY(-50%) rotate(-45deg);
			}
		}
	}

	ul.washu-main-menu-list {
		margin-bottom: 0;
		transition: height 0.3s;

		> .menu-item > .menu-item-link {
			text-transform: uppercase;
		}
	}

	.washu-main-menu-content {
		position: relative;

		.header-alt & {
			overflow: scroll;
			max-height: calc(100vh - 6.975rem);
			-webkit-overflow-scrolling: touch;
			overscroll-behavior: contain;
		}

		.header-alt .is-sticky & {
			overflow: scroll;
			max-height: calc(100vh - 4.35rem);
		}
	}

	.washu-main-menu-list,
	.sub-menu {
		position: relative;
		bottom: 0;
		left: 0;
		width: 100%;
		z-index: 1;
		overflow: hidden;
		transition: transform 0.3s;

		.menu-item {
			margin: 0;
		}

		a {
			display: block;
			color: #fff;
			/* truncate text with ellipsis if too long */
			overflow: hidden;
			text-overflow: ellipsis;
			white-space: nowrap;
			border-width: 0;
			border-top-width: 1px;
			border-color: tint($gray-dark, 8%);
			border-style: solid;
		}

		li:first-of-type > a,
		li:first-of-type > button {
			border-top-width: 0;
		}

		a,
		button,
		.search-form {
			/* Force Hardware Acceleration */
			transform: translateZ(0);
			transition: opacity .3s, transform .3s;
		}

		&.move-out > li > a,
		&.move-out > li > button,
		&.move-out > li > .search-form {
			/* push the dropdown items to the left when secondary dropdown slides in */
			opacity: 0;
			transform: translateX(-850px);
			display: none;
		}
	}

	.washu-main-menu-title {
		display: block;
		overflow: hidden;
		padding: 0 60px;
		border-bottom: 1px solid tint($gray-dark, 8%);
		text-align: center;
		text-transform: uppercase;
		text-overflow: ellipsis;
		line-height: 51px;
		white-space: nowrap;
	}

	.menu-item-has-children > .menu-item-link {
		float: left;
		display: inline-block;
		width: 80%;
		width: calc(100% - 75px);
		overflow: hidden;
		vertical-align: top;

		@media screen and (min-width: $break-zoom) {
			width: 85%;
			width: calc(100% - 75px);
		}
	}

	.menu-item-has-children .sub-menu-toggle {
		position: relative;
		background: none;
		border: none;
		border-left: 1px solid tint($gray-dark, 8%);
		border-top: 1px solid tint($gray-dark, 8%);
		border-radius: 0;
		float: right;
		display: inline-block;
		width: 20%;
		width: calc(75px * 1);
		overflow: hidden;
		text-indent: 100%;
		white-space: nowrap;
		color: transparent;

		@media screen and (min-width: $break-zoom) {
			width: 15%;
			width: calc(75px * 1);
		}

		&:before,
		&:after {
			/* arrow icon in CSS - for element with nested unordered lists */
			content: '';
			position: absolute;
			top: 50%;
			right: 50%;
			margin-right: -4px;
			margin-top: -1px;
			display: inline-block;
			height: 2px;
			width: 10px;
			background: #fff;
			transform-origin: 9px 50%;
			backface-visibility: hidden;
		}

		&:before {
			transform: rotate( 45deg );
		}

		&:after {
			transform: rotate(-45deg);
		}
	}

	.header-search input[type="search"] {
		width: 100%;
		height: 50px;
		padding: 0 20px;
		background-color: tint($gray-dark, 8%);
		@include font-size(1);
		color: #fff;
		border: none;
		border-radius: 0;
		-webkit-appearance: none; // Remove default styling from input in mobile Safari

		&::-webkit-input-placeholder {
			color: $gray-light;
		}

		&::-moz-placeholder {
			color: $gray-light;
			opacity: 1;
		}

		&:-ms-input-placeholder {
			color: $gray-light;
		}

		&::placeholder {
			color: $gray-light;
			opacity: 1;
		}

		&:focus {
			background: #fff;
			color: $gray-dark;
			outline: none;

			&::-webkit-input-placeholder {
				color: $color-text;
		    }

			&::-moz-placeholder {
				color: $color-text;
				opacity: 1;
	        }

			&:-ms-input-placeholder {
				color: $color-text;
			}

			&::placeholder {
				color: $color-text;
				opacity: 1;
			}
		}
	}

	.washu-main-menu-content .header-search {
		margin: 0;

		.search-submit {
			position: absolute;
			top: 2px;
			right: 2px;
			height: 46px;
			width: 48px;
			background: tint($gray-dark, 8%);
			border: 0;
			border-radius: 0;
			padding: 0;

			img {
				display: none;
			}

			&:after {
				content: '';
				width: 100%;
				height: 100%;
				display: block;
				background: url('_assets/icons/search.svg') no-repeat center;
				background-size: 18px;

				.no-svg & {
					background-image: url('_assets/icons/search.png');
				}
			}
		}

		.results {
			display: none;
		}

		.is-focused .search-submit {
			background: $red;
		}
	}

	.no-js .washu-main-menu-wrapper:hover .washu-main-menu {
		visibility: visible;
		opacity: 1;
		transform: translateY(0);
	}

	.no-js .washu-main-menu-wrapper .main-menu-close {
		display: none;
	}

	.search-field {
		height: 45px;
	}

	.site .sub-menu.active,
	.site .washu-main-menu .main-menu-back.visible {
		visibility: hidden;
	}

	.site.active .sub-menu.active,
	.site.active .washu-main-menu .main-menu-back.visible {
		visibility: visible;
	}

	.sub-menu {
		visibility: hidden;
		display: none;
		top: 0;
		transform: translateX(100%);
		position: absolute;

		&.active {
			visibility: visible;
			display: block;
		}

		.move-out & {
			transform: translateX(0);

			.sub-menu {
				transform: translateX(100%);
			}
		}

		.move-out .move-out & {
			transform: translateX(0);
		}

		.sub-menu {
			top: 0;
			transform: translateX(200%);
		}
	}
}